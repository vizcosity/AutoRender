{"version":3,"sources":["Landing.js","AutoRenderAPI.js","NewRenderJob.js","ManageJobs.js","Footer.js","Log.js","App.js","serviceWorker.js","index.js"],"names":["Buttons","Box","margin","vertical","direction","justify","left","right","padding","borderRadius","Button","to","color","primary","hoverIndicator","icon","Add","label","as","Link","List","Landing","flex","align","fill","Heading","level","encodeGetParams","p","Object","entries","map","kv","encodeURIComponent","join","getJobs","ops","Promise","resolve","reject","fetch","method","headers","then","response","json","e","getLogs","lines","a","result","resultJSON","console","log","FormHeader","style","maxWidth","display","alignItems","marginRight","opacity","NewRenderJob","props","context","state","submitting","postSubmission","onSubmitHandler","bind","this","setState","jobDetails","formValues","value","target","i","length","input","files","name","truncateBuffers","formData","FormData","keys","forEach","field","append","body","success","job","id","Fragment","Validate","Text","href","size","Form","onSubmit","FormField","required","placeholder","help","htmlFor","type","Component","statusColourMap","completed","rendering","failed","pending","columns","property","header","render","item","key","weight","artistName","status","disabled","Download","JobsTable","pad","DataTable","data","ManageJobs","jobs","details","Footer","marginTop","top","background","center","Anchor","LogContainer","logs","className","Paragraph","Log","fetchAndDisplayLogs","setInterval","replace","split","reverse","App","Grommet","theme","grommet","plain","full","minHeight","exact","path","component","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3d9dad5e.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  Grommet,\n  Box,\n  Heading,\n  Button\n} from 'grommet';\nimport { Add, List } from 'grommet-icons';\nimport { Link } from 'react-router-dom';\n\n// Stylingn.\nimport './App.css';\n\n\n\nconst AppBar = (props) => <Box\n  tag='header'\n  direction='row'\n  align='center'\n  justify='between'\n  background='brand'\n  pad={{left: 'medium', right: 'small', vertical: 'large'}}\n  style={{ zIndex: '1' }}\n{...props}\n/>\n\n\nconst Buttons = () =>\n<Box\n  margin={{vertical: 'small'}}\n  direction='row'\n  justify='center'\n  margin={{left: 'auto', right: 'auto', vertical: 'medium'}}\n  style={{padding: '50px', borderRadius: '20px'}}\n>\n  <Button to=\"/newRenderJob\" margin='10px' color='dark-1' primary hoverIndicator={true} icon={<Add />} label=\"New Render Job\" as={Link}></Button>\n  <Button to=\"/manageJobs\" margin='10px'color='dark-2' hoverIndicator={true} icon={<List />} label=\"Manage Jobs\" as={Link}></Button>\n</Box>\n\nconst Landing = () =>\n<Box\n  flex\n  justify='center'\n  align='center'\n  fill='vertical'\n>\n  <Heading level='1' margin='0' color='gray'>AutoRender</Heading>\n  <Buttons />\n</Box>\n\nexport default Landing;\n","// REF: https://stackoverflow.com/questions/8135132/how-to-encode-url-parameters\nconst encodeGetParams = p =>\n  p ? '?' + Object.entries(p).map(kv => kv.map(encodeURIComponent).join(\"=\")).join(\"&\") : \"\";\n\nconst enqueueJob = (jobDetails) => new Promise((resolve, reject) => {\n\n  var formData = new FormData();\n\n  Object.keys(jobDetails).forEach(field => {\n    formData.append(field, jobDetails[field]);\n  })\n\n  fetch('/api/v1/queueJob', {\n    method: 'POST',\n    body: formData\n  })\n  .then(response => {\n      try {\n        return response.json();\n      } catch(e) {\n        reject(e);\n      }\n  })\n  .then(response => resolve(response));\n\n});\n\nconst getJobs = ops => new Promise((resolve, reject) => {\n\n  fetch('/api/v1/jobs'+encodeGetParams(ops), {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n  .then(response => {\n      try {\n        return response.json();\n      } catch(e) {\n        reject(e);\n      }\n  })\n  .then(response => resolve(response));\n\n});\n\nconst getJobDetail = ops => new Promise((resolve, reject) => {\n\n  fetch('/api/v1/jobDetail'+encodeGetParams(ops), {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n  .then(response => {\n      try {\n        return response.json();\n      } catch(e) {\n        reject(e);\n      }\n  })\n  .then(response => resolve(response));\n\n});\n\n// This should automatically trigger a download.\nconst downloadJobResult = ops => {\n\n  fetch('/api/v1/jobDetail'+encodeGetParams(ops), {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n}\n\nconst getLogs = async lines => {\n  try {\n    let result = await fetch('/api/v1/logs?lines='+lines, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    let resultJSON = await result.json();\n    console.log('Fetched logs:', resultJSON);\n    return resultJSON.log;\n  } catch(e){\n    return \"Could not load logs. AutoRender API is probably down.\";\n  }\n}\n\nexport {\n  enqueueJob,\n  getJobs,\n  getJobDetail,\n  getLogs,\n  downloadJobResult\n}\n","import React, { Component } from 'react';\nimport {\n  Box,\n  Heading,\n  Form,\n  FormField,\n  Button,\n  Anchor,\n  Text\n} from 'grommet';\nimport { Fade } from 'react-reveal';\nimport { Add } from 'grommet-icons';\nimport { ScaleLoader } from 'react-spinners';\nimport { enqueueJob } from './AutoRenderAPI';\nimport { Validate } from 'grommet-icons';\n\nconst FormHeader = () => <Box\n  style={{\n    maxWidth:'500px'\n  }}\n  margin={{vertical: 'medium'}}\n  fill='horizontal'\n  justify='center'\n>\n  <Heading style={{\n    display: 'flex',\n    alignItems: 'center'\n  }} color='dark-2' level='3'><Add style={{marginRight: '10px', opacity: '0.6'}} />Add a new Render Job</Heading>\n  <Heading color='dark-3' margin='none' level='4'>Make sure everything is correct or else you'll waste a few hours yo</Heading>\n</Box>\n\nexport default class NewRenderJob extends Component {\n\n  constructor(props, context){\n    super(props, context);\n\n    this.state = {\n      submitting: false,\n      postSubmission: null\n    }\n\n    this.onSubmitHandler = this.onSubmitHandler.bind(this);\n  }\n\n  onSubmitHandler(e){\n\n    this.setState({\n      ...this.state,\n      submitting: true,\n    }, () => {\n      var formValues = {\n        ...e.value\n      };\n\n      console.log(e.target);\n\n\n      // Grab all of the files and attatch them to the formValues object.\n      for (var i = 0; i < e.target.length; i++){\n      var input = e.target[i];\n        if (input.files){\n          console.log(input, input.files);\n          formValues[input.name] = input.files[0]\n        }\n      }\n\n      enqueueJob({\n        ...formValues,\n        truncateBuffers:  true\n      })\n      .then(result => {\n      if (result.success)\n          this.setState({\n            ...this.state,\n            postSubmission: result.job.id\n          });\n      });\n\n    });\n  }\n\n  render(){\n    return (\n      <Box flex margin={{vertical: 'medium'}} align='center' justify='center'>\n      <FormHeader />\n        <Box\n          fill='horizontal'\n          margin={{vertical: 'large'}}\n          style={{maxWidth: '500px'}}\n        >\n        {\n          !this.state.submitting ?\n            <Form onSubmit={this.onSubmitHandler}>\n              <Heading level='3'>Song Details</Heading>\n\n              <FormField required name=\"artistName\" label=\"Artist Name\" placeholder=\"Porter Robinson\"/>\n              <FormField required name=\"songName\" label=\"Song Name\" placeholder=\"Sad Machine\"/>\n              <FormField required name=\"genre\" label=\"Genre\" placeholder=\"Electronic\" value=\"Electronic\"/>\n              <FormField required name=\"visualizerColour\" label=\"Visualizer Colour\" help=\"Must be a valid hex value e.g. #FFEA32\" htmlFor=\"test\" />\n\n              <Heading level='3'>Files</Heading>\n\n              <FormField required name=\"backgroundFile\" label=\"Background Image\" type=\"file\" />\n              <FormField  name=\"songFile\" label=\"Song File\" type=\"file\" />\n              <FormField  name=\"artworkFile\" label=\"Artwork Image\" type=\"file\" />\n\n\n              <Button type=\"submit\" primary color='dark-1' label=\"Submit\" />\n            </Form> :\n              <Fade>\n                <Box align='center' direction='column'>\n                  {\n                    !this.state.postSubmission ?\n                    <React.Fragment>\n                      <ScaleLoader\n                        size='large'\n                        color=\"#555555\"\n                      />\n                      <Text color='dark-2'>Queuing up...</Text>\n                    </React.Fragment> :\n                    <React.Fragment>\n                      <Validate color='status-ok'/>\n                      <Text\n                        margin={{vertical: 'small'}}\n                        color='status-ok'\n                      >Queued {this.state.postSubmission}</Text>\n                      <Button\n                        margin={{vertical : 'large' }}\n                        label=\"View Jobs\"\n                        color='dark-1'\n                        as='a'\n                        href='/manageJobs'\n                        primary\n                      />\n                    </React.Fragment>\n                  }\n\n              </Box>\n              </Fade>\n\n        }\n\n        </Box>\n      </Box>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { getJobs, downloadJobResult } from './AutoRenderAPI';\nimport { Fade } from 'react-reveal';\nimport { Download } from 'grommet-icons';\nimport {\n  Grommet,\n  Box,\n  Button,\n  DataTable,\n  Meter,\n  Text,\n  CheckBox,\n  Anchor,\n  Heading\n} from \"grommet\";\nimport { ScaleLoader } from 'react-spinners';\n\nconst statusColourMap = {\n  completed: 'status-ok',\n  rendering: 'status-warning',\n  failed: 'status-error',\n  pending: 'status-unknown'\n};\n\nconst columns = [\n  // {\n  //   property: \"date\",\n  //   header: \"Date\",\n  //   render: datum =>\n  //   datum.date && new Date(datum.date).toLocaleDateString(\"en-US\"),\n  //   align: \"end\",\n  // },\n  {\n    property: \"key\",\n    header: \"#\",\n    render: item => <Text>{item.key}</Text>\n  }, {\n    property: \"artistName\",\n    header: \"Artist\",\n    render: item => <Text weight=\"bold\">{item.artistName}</Text>\n  },\n  {\n    property: \"songName\",\n    header: \"Song\"\n  },\n  {\n    property: \"status\",\n    header: \"Status\",\n    render: item => {\n      return <Text color={statusColourMap[item.status]}>{item.status}</Text>\n    }\n  },\n  {\n    property: \"download\",\n    header: \"Download\",\n    align: \"center\",\n    render: item =>\n      <Button\n        style={{\n          padding: '5px',\n          borderRadius: '5px'\n        }}\n        hoverIndicator={true}\n        as=\"a\"\n        href={item.status === 'completed' ? `/api/v1/jobResult?id=${item.id}` : null}\n        disabled={item.status !== 'completed'}\n      >\n        <Download />\n      </Button>\n  }\n]\n\nclass JobsTable extends Component {\n\n  render() {\n    return (\n        <Box align=\"center\" pad=\"large\">\n          <DataTable\n            columns={this.props.columns}\n            data={this.props.data}\n          />\n        </Box>\n    );\n  }\n}\n\nexport default class ManageJobs extends Component {\n\n  constructor(props, context){\n    super(props, context);\n\n    this.state = {\n      jobs: null\n    };\n\n    getJobs({truncateBuffers: true}).then(result => this.setState({\n      ...this.state,\n      jobs: result.jobs\n    }));\n\n  }\n\n  render(){\n    console.log(this.state.jobs);\n    return (\n      <Box pad='large' align='center'>\n      <Box margin={{vertical: 'large'}}>\n        <Heading margin='none' color='dark-1' level=\"1\" size=\"small\">\n          What's cooking, b0ss?\n        </Heading>\n        <Heading color='dark-2' margin='none' level=\"2\" size=\"xsmall\">\n          View all the jobs below. Cooked, pending, or spoilt.\n        </Heading>\n      </Box>\n        {\n          this.state.jobs ? <Fade><JobsTable\n            data={this.state.jobs.map((item, i) => Object({\n              ...item,\n              ...item.details,\n              key: i\n            }))}\n            columns={columns}\n          /></Fade> : <Text>Loading...</Text>\n        }\n\n      </Box>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Box, Heading, Anchor } from 'grommet';\n\nexport default class Footer extends Component {\n\n  render(){\n    return (\n      <Box\n          style={{\n            padding: '25px',\n            marginTop: 'auto'\n          }}\n          margin={{ top: 'auto' }}\n          color='dark-1'\n          background='dark-1'\n          fill='horizontal'\n          align='center'\n          as='footer'\n        >\n        <Heading center level='3' size='xsmall'>Video rendering automation made with ☕️ & ❤️ by <Anchor href=\"http://aaronbaw.com/\" label=\"Aaron\" /></Heading>\n      </Box>\n    );\n  }\n}\n","/**\n * Log Component for react.\n */\n\nimport React, { Component } from 'react';\nimport { Paragraph, Heading } from 'grommet';\nimport { getLogs } from './AutoRenderAPI';\n\nconst LogContainer = ({logs}) => <div className=\"log-container\">\n  {\n    logs.map(log =>\n      <Paragraph\n      style={{maxWidth: 'unset'}}\n      color=\"dark-2\"\n      size=\"small\">{log}\n      </Paragraph>)\n  }\n</div>\n\nexport default class Log extends Component {\n\n  constructor(props, context){\n    super(props, context);\n\n    this.state = {\n      logs: \"Loading...\"\n    }\n\n    this.fetchAndDisplayLogs = this.fetchAndDisplayLogs.bind(this);\n\n    this.fetchAndDisplayLogs();\n    // Set a recurring job to fetch the logs and display them.\n    setInterval(this.fetchAndDisplayLogs, 2000);\n\n  }\n\n  fetchAndDisplayLogs(){\n    getLogs().then(logs => {\n      this.setState({...this.state, logs: logs.replace(/info: /g, '')})\n    });\n  }\n\n  render(){\n    return (\n      <div className=\"log-and-text-container\">\n      <Heading color='dark-3'>Logs</Heading>\n      <LogContainer\n        logs={this.state.logs.split('\\n').reverse()}\n      />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Grommet, Box } from 'grommet';\nimport Landing from './Landing';\nimport NewRenderJob from './NewRenderJob';\nimport ManageJobs from './ManageJobs';\nimport Footer from './Footer';\nimport Log from './Log';\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\nimport { grommet } from 'grommet/themes';\n\n// Stylingn.\nimport './App.css';\n\nconst theme = {\n  global: {\n   colors: {\n     brand: 'white',\n   },\n    font: {\n      family: 'Open Sans ',\n      size: '18px',\n      height: '20px',\n    },\n  },\n};\n\nfunction App() {\n  return (\n    <Grommet theme={grommet} plain full>\n    <Box\n      className=\"app-container\"\n      style={{\n        minHeight: '100%'\n      }}\n    >\n      <Router>\n        <Route exact path=\"/\" component={() => <Landing />} />\n        <Route exact path=\"/newRenderJob\" component={() => <NewRenderJob />} />\n        <Route exact path=\"/manageJobs\" component={() => <ManageJobs />} />\n      </Router>\n      <Log />\n      <Footer />\n    </Box>\n    </Grommet>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}