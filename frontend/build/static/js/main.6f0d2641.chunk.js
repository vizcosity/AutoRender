(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){e.exports=n(150)},105:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),c=n.n(o),l=(n(105),n(172)),i=n(97),s=n(20),u=n(174),m=n(175),p=n(161),d=n(162),b=n(39),f=(n(81),function(){var e;return r.a.createElement(i.a,(e={margin:{vertical:"small"},direction:"row",justify:"center"},Object(s.a)(e,"margin",{left:"auto",right:"auto",vertical:"medium"}),Object(s.a)(e,"style",{padding:"50px",borderRadius:"20px"}),e),r.a.createElement(u.a,{to:"/newRenderJob",margin:"10px",color:"dark-1",primary:!0,hoverIndicator:!0,icon:r.a.createElement(p.a,null),label:"New Render Job",as:b.b}),r.a.createElement(u.a,{to:"/manageJobs",margin:"10px",color:"dark-2",hoverIndicator:!0,icon:r.a.createElement(d.a,null),label:"Manage Jobs",as:b.b}))}),h=function(){return r.a.createElement(i.a,{flex:!0,justify:"center",align:"center",fill:"vertical"},r.a.createElement(m.a,{level:"1",margin:"0",color:"gray"},"AutoRender"),r.a.createElement(f,null))},g=n(21),y=n(22),j=n(24),E=n(23),v=n(33),O=n(25),w=n(163),k=n(173),x=n(176),P=n(49),S=n(72),D=n(30),J=n.n(D),A=n(41),C=function(e){return e?"?"+Object.entries(e).map(function(e){return e.map(encodeURIComponent).join("=")}).join("&"):""},F=function(){var e=Object(A.a)(J.a.mark(function e(t){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/job",{method:"DELETE",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(A.a)(J.a.mark(function e(t){var n,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/logs?lines="+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,console.log("Fetched logs:",a),e.abrupt("return",a.log);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return","Could not load logs. AutoRender API is probably down.");case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),N=n(166);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=function(){return r.a.createElement(i.a,{style:{maxWidth:"500px"},margin:{vertical:"medium"},fill:"horizontal",justify:"center"},r.a.createElement(m.a,{style:{display:"flex",alignItems:"center"},color:"dark-2",level:"3"},r.a.createElement(p.a,{style:{marginRight:"10px",opacity:"0.6"}}),"Add a new Render Job"),r.a.createElement(m.a,{color:"dark-3",margin:"none",level:"4"},"Make sure everything is correct or else you'll waste a few hours yo"))},T=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(j.a)(this,Object(E.a)(t).call(this,e,n))).state={submitting:!1,postSubmission:null},a.onSubmitHandler=a.onSubmitHandler.bind(Object(v.a)(a)),a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"onSubmitHandler",value:function(e){var t=this;this.setState(z({},this.state,{submitting:!0}),function(){var n,a=z({},e.value);console.log(e.target);for(var r=0;r<e.target.length;r++){var o=e.target[r];o.files&&(console.log(o,o.files),a[o.name]=o.files[0])}(n=z({},a,{truncateBuffers:!0}),new Promise(function(t,a){var r=new FormData;Object.keys(n).forEach(function(e){r.append(e,n[e])}),fetch("/api/v1/queueJob",{method:"POST",body:r}).then(function(t){try{return t.json()}catch(e){a(e)}}).then(function(e){return t(e)})})).then(function(e){e.success&&t.setState(z({},t.state,{postSubmission:e.job.id}))})})}},{key:"render",value:function(){return r.a.createElement(i.a,{flex:!0,margin:{vertical:"medium"},align:"center",justify:"center"},r.a.createElement(L,null),r.a.createElement(i.a,{fill:"horizontal",margin:{vertical:"large"},style:{maxWidth:"500px"}},this.state.submitting?r.a.createElement(P.Fade,null,r.a.createElement(i.a,{align:"center",direction:"column"},this.state.postSubmission?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{color:"status-ok"}),r.a.createElement(x.a,{margin:{vertical:"small"},color:"status-ok"},"Queued ",this.state.postSubmission),r.a.createElement(u.a,{margin:{vertical:"large"},label:"View Jobs",color:"dark-1",as:"a",href:"/manageJobs",primary:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement(S.ScaleLoader,{size:"large",color:"#555555"}),r.a.createElement(x.a,{color:"dark-2"},"Queuing up...")))):r.a.createElement(w.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,{level:"3"},"Song Details"),r.a.createElement(k.a,{required:!0,name:"artistName",label:"Artist Name",placeholder:"Porter Robinson"}),r.a.createElement(k.a,{required:!0,name:"songName",label:"Song Name",placeholder:"Sad Machine"}),r.a.createElement(k.a,{required:!0,name:"genre",label:"Genre",placeholder:"Electronic",value:"Electronic"}),r.a.createElement(k.a,{required:!0,name:"visualizerColour",label:"Visualizer Colour",help:"Must be a valid hex value e.g. #FFEA32",htmlFor:"test"}),r.a.createElement(m.a,{level:"3"},"Files"),r.a.createElement(k.a,{required:!0,name:"backgroundFile",label:"Background Image",type:"file"}),r.a.createElement(k.a,{name:"songFile",label:"Song File",type:"file"}),r.a.createElement(k.a,{name:"artworkFile",label:"Artwork Image",type:"file"}),r.a.createElement(u.a,{type:"submit",primary:!0,color:"dark-1",label:"Submit"}))))}}]),t}(a.Component),H=n(167),q=n(168),W=n(169),B=n(170);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G={completed:"status-ok",rendering:"status-warning",failed:"status-error",pending:"status-unknown"},Q=function(e){function t(){return Object(g.a)(this,t),Object(j.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(i.a,{align:"center",pad:"large"},r.a.createElement(B.a,{columns:this.props.columns,data:this.props.data}))}}]),t}(a.Component),U=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(j.a)(this,Object(E.a)(t).call(this,e,n))).state={jobs:null},a.fetchJobs(),a.columns=[{property:"key",header:"#",render:function(e){return r.a.createElement(x.a,null,e.key)}},{property:"artistName",header:"Artist",render:function(e){return r.a.createElement(x.a,{weight:"bold"},e.artistName)}},{property:"songName",header:"Song"},{property:"status",header:"Status",render:function(e){return r.a.createElement(x.a,{color:G[e.status]},e.status)}},{property:"progress",header:"Progress",render:function(e){return r.a.createElement(x.a,{color:"status-unknown"},"".concat(e.progress,"%"))}},{property:"download",header:"Download",align:"center",render:function(e){return r.a.createElement(u.a,{style:{padding:"5px",borderRadius:"5px"},hoverIndicator:!0,as:"a",href:"completed"===e.status?"/api/v1/jobResult?id=".concat(e.id):null,disabled:"completed"!==e.status},r.a.createElement(H.a,null))}},{property:"clean",header:"Clean",align:"center",render:function(e){return r.a.createElement(u.a,{style:{padding:"5px",borderRadius:"5px"},hoverIndicator:!0,as:"a",onClick:function(){return a.cancelOrDeleteJobHandler(e)}},"rendering"===e.status?r.a.createElement(q.a,null):r.a.createElement(W.a,null))}}],a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"cancelOrDeleteJobHandler",value:function(){var e=Object(A.a)(J.a.mark(function e(t){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("This will cancel the job. Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,F(t.id);case 4:e.sent.success&&console.log("Successfully deleted ".concat(t.id)),this.fetchJobs();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchJobs",value:function(){var e,t=this;(e={truncateBuffers:!0},new Promise(function(t,n){fetch("/api/v1/jobs"+C(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){try{return e.json()}catch(t){n(t)}}).then(function(e){return t(e)})})).then(function(e){return t.setState(V({},t.state,{jobs:e.jobs}))})}},{key:"render",value:function(){return console.log(this.state.jobs),r.a.createElement(i.a,{pad:"large",align:"center"},r.a.createElement(i.a,{margin:{vertical:"large"}},r.a.createElement(m.a,{margin:"none",color:"dark-1",level:"1",size:"small"},"What's cooking, b0ss?"),r.a.createElement(m.a,{color:"dark-2",margin:"none",level:"2",size:"xsmall"},"View all the jobs below. Cooked, pending, or spoilt.")),this.state.jobs?r.a.createElement(P.Fade,null,r.a.createElement(Q,{data:this.state.jobs.map(function(e,t){return Object(V({},e,{},e.details,{key:t}))}),columns:this.columns})):r.a.createElement(x.a,null,"Loading..."))}}]),t}(a.Component),$=n(177),K=function(e){function t(){return Object(g.a)(this,t),Object(j.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(i.a,{style:{padding:"25px",marginTop:"auto"},margin:{top:"auto"},color:"dark-1",background:"dark-1",fill:"horizontal",align:"center",as:"footer"},r.a.createElement(m.a,{center:!0,level:"3",size:"xsmall"},"Video rendering automation made with \u2615\ufe0f & \u2764\ufe0f by ",r.a.createElement($.a,{href:"http://aaronbaw.com/",label:"Aaron"})))}}]),t}(a.Component),X=n(178);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Z=function(e){var t=e.logs;return r.a.createElement("div",{className:"log-container"},t.map(function(e){return r.a.createElement(X.a,{style:{maxWidth:"unset"},color:"dark-2",size:"small"},e)}))},_=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(j.a)(this,Object(E.a)(t).call(this,e,n))).state={logs:"Loading..."},a.fetchAndDisplayLogs=a.fetchAndDisplayLogs.bind(Object(v.a)(a)),a.fetchAndDisplayLogs(),setInterval(a.fetchAndDisplayLogs,2e3),a}return Object(O.a)(t,e),Object(y.a)(t,[{key:"fetchAndDisplayLogs",value:function(){var e=this;R().then(function(t){e.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.state,{logs:t.replace(/info: /g,"")}))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"log-and-text-container"},r.a.createElement(m.a,{color:"dark-3"},"Logs"),r.a.createElement(Z,{logs:this.state.logs.split("\n").reverse()}))}}]),t}(a.Component),ee=n(28),te=n(95);var ne=function(){return r.a.createElement(l.a,{theme:te.grommet,plain:!0,full:!0},r.a.createElement(i.a,{className:"app-container",style:{minHeight:"100%"}},r.a.createElement(b.a,null,r.a.createElement(ee.a,{exact:!0,path:"/",component:function(){return r.a.createElement(h,null)}}),r.a.createElement(ee.a,{exact:!0,path:"/newRenderJob",component:function(){return r.a.createElement(T,null)}}),r.a.createElement(ee.a,{exact:!0,path:"/manageJobs",component:function(){return r.a.createElement(U,null)}})),r.a.createElement(_,null),r.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.6f0d2641.chunk.js.map